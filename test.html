<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>mo Â· js</title>
    <link rel="stylesheet" type="text/css" href="css/main.css">
  </head>
  <body>

    <style>
      body, html {
        height: 100%;
      }
      /*div {
        outline: 1px solid red;
      }*/
      .el {
        position: absolute;
        top: 50%;
        width: 100px;
        height: 100px;
        margin-top: -50px;
        border-radius: 10%;
        background: cyan;
      }
    </style>

    <div class="el" id="js-el"></div>

    <script src="vendor/lodash.min.js"></script>
    <script src="vendor/platform.js"></script>
    <script src="vendor/benchmark.js"></script>

    <!-- <script src="node_modules/mojs-player/build/mojs-player.js"></script> -->
    <!-- <script src="http://cdn.jsdelivr.net/mojs/latest/mo.min.js"></script> -->
    <!-- <script src="vendor/mo-js/build/mo.min.js"></script> -->
    <!-- <script src="https://cdn.jsdelivr.net/mojs/0.288.1/mo.min.js"></script> -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.19.1/TweenMax.min.js"></script> -->
    <script src="build/mo.js"></script>

    <button id="js-play">play</button>
    <button id="js-pause">pause</button>
    <button id="js--1x">.1x</button>
    <button id="js--5x">.5x</button>
    <button id="js-1x">1x</button>
    <button id="js-2x">2x</button>
    <button id="js-5x">5x</button>
    <button id="js-10x">10x</button>
    <button id="js-stop">stop</button>
    <button id="js-reverse">reverse</button>
    <button id="js-replay">replay</button>

    <br />
    <br />
    <br />

    <input type="range" min="0" max="1000" value="0" id="js-slider" style="width: 500px" />

    <script>
      var el = document.querySelector('#js-el');
      var playBtn = document.querySelector('#js-play');
      var pauseBtn = document.querySelector('#js-pause');
      var reverseBtn = document.querySelector('#js-reverse');
      var stopBtn = document.querySelector('#js-stop');
      var replayBtn = document.querySelector('#js-replay');
      // speeds
      var one10 = document.querySelector('#js--1x');
      var five10 = document.querySelector('#js--5x');
      var x1 = document.querySelector('#js-1x');
      var x2 = document.querySelector('#js-2x');
      var x5 = document.querySelector('#js-5x');
      var x10 = document.querySelector('#js-10x');
      var slider = document.querySelector('#js-slider');

      const timeline = new mojs.Timeline({
        // delay: 500,
        duration: 5000,
        easing: 'linear.none',
        onUpdate(ep, p, isForward, isReverse, index) {
          // console.log(`{${index === void 0 ? '' : index}}, [tween update]`, ep);
          // el.style.transform = `translate(${200*ep}px, 0)`;
        },
        onChimeIn(isForward, isReverse, index) {
          // console.log(`{${index === void 0 ? '' : index}}, [tween chime in]`);
        },
        onChimeOut(isForward, isReverse, index) {
          // console.log(`{${index === void 0 ? '' : index}}, [tween chime out]`);
        },
        onStart(isForward, isReverse, index) {
          // console.log(`{${index === void 0 ? '' : index}}, [tween start]`);
        },
        onComplete(isForward, isReverse, index) {
          // console.log(`{${index === void 0 ? '' : index}}, [tween complete]`);
        },
        onChimeIn(isForward, isReverse, index) {
          // console.log(`{${index === void 0 ? '' : index}}, [tween chime in]`);
        }
      });

      for (let i = 0; i < 20; i++) {
        timeline.add(new mojs.Tweenie({
          onUpdate(ep, p, isForward, isReverse, index) {
            console.log(`[tween update]`, ep);
            (i === 0) && (el.style.transform = `translate(${200*ep}px, 0)`);
          },
        }));
      }

      playBtn.addEventListener('click', function() {
        console.log('::: play click');
        console.time('start');
        timeline.play();
      });

      pauseBtn.addEventListener('click', function() {
        console.log('::: pause click');
        timeline.pause();
      });

      reverseBtn.addEventListener('click', function() {
        console.log('::: revert click');

        timeline.reverse();
      });

      stopBtn.addEventListener('click', function() {
        console.log('::: stop click');

        timeline.stop();
      });

      replayBtn.addEventListener('click', function() {
        console.log('::: replay click');

        timeline.replay();
      });

      one10.addEventListener('click', function() {
        console.log('::: speed: .1x');
        timeline.setSpeed(.1);
      });

      five10.addEventListener('click', function() {
        console.log('::: speed: .5x');
        timeline.setSpeed(.5);
      });

      x1.addEventListener('click', function() {
        console.log('::: speed: 1x');
        timeline.setSpeed(1);
      });

      x2.addEventListener('click', function() {
        console.log('::: speed: 2x');
        timeline.setSpeed(2);
      });

      x5.addEventListener('click', function() {
        console.log('::: speed: 5x');
        timeline.setSpeed(5);
      });

      x10.addEventListener('click', function() {
        console.log('::: speed: 10x');
        timeline.setSpeed(10);
      });

      slider.addEventListener('input', function() {
        // console.log(':: slider value: ', this.value);
        timeline.setProgress(this.value/1000);
      });

      // var el = {};
      // var deltas = new mojs.__helpers__.Deltas({
      //   el: el,
      //   x: { 200: 300 },
      //   duration: 2000,
      //   customProperties: {
      //     render(props) {
      //       document.body.style.transform = `translate(${props.x}px, 0)`;
      //     }
      //   }
      //   // onUpdate(ep, p, isForward) {
      //   //   console.log(`ep: ${ep}`, el);
      //   // }
      // }).play();

    </script>

  </body>
</html>
